var _ENGAGEYA_WIDGETS=_ENGAGEYA_WIDGETS||[],_ENG_is_google_tag_ran=_ENG_is_google_tag_ran||!1,_ENG_is_sr_started_loading=_ENG_is_sr_started_loading||!1,googletag=googletag||{};googletag.cmd=googletag.cmd||[];var ENGAGEYA=function(t){this.widget_wrapper_elm_id=t.wwei,this.pid=t.pid?t.pid:"",this.subid=t.subid?t.subid:"",this.publisher_id=t.pubid?t.pubid:"",this.website_id=t.webid?t.webid:"",this.widget_id=t.wid?t.wid:"",this.width=t.width||"",this.height=t.height||"",this.plr_elm_id=t.plreid,this.plr_type=t.plrtid||-1,this.show_on_pause=t.issop?t.issop:0,this.show_on_complete=t.issoc?t.issoc:0,this.show_on_idle=t.issoi?t.issoi:0,this.is_index_page=t.isidx?t.isidx:1,this.is_widget_autorun=t.isar?t.isar:0,this.is_video_widget=t.isvw?t.isvw:0,this.plr_wmode=t.pwmd?t.pwmd:"opaque",this.plr_func_name=t.pfn,this.input_url=t.iurl||null,this.feed_url="ext1-api.engageya.com/gas-api/feed.json",this.recs_url="recs.engageya.com/rec-api/getrecs.json",this.recs_url_premium="premium.engageya.com/rec-api/getrecs.json",this.multi_widgets_recs_url="recs.engageya.com/rec-api/get_mw_recs.json",this.pp_recs_url="recs3.engageya.com/rec-api/getrecs.json",this.is_do_pp_recs_call=!1,this.exclude_post_url="recs.engageya.com/rec-api/outpid.json",this.event_url="recs.engageya.com/rec-api/event.json",this.default_imgs_url="widget.engageya.com/img/",this.aws_images_url="//engageya-eu-images9.s3-website-eu-west-1.amazonaws.com",this.cdn_images_url="//images9.engageya.com",this.google_tag_script_url="https://www.googletagservices.com/tag/js/gpt.js",this.default_video_post_btn="widget.engageya.com/img/vplay.png",this.doc_ready_called=!1,this.random_id=Math.ceil(1e17*Math.random()),this.cb="engageya_cb_"+this.random_id,this.num_of_slides=t.tnos||15,this.min_slides=2,this.jq=null,this.num_of_jq_attempts=20,this.find_wrapper_elm_retries=10,this.widget_idx=0,this.isNoConflictJquery=t.ncjqry||!1,this.scripts_elms=[],this.get_recs_states=[[],["BUFFERING","PLAYING"],[0,2,3],[1]],this.rec_types=["all","eng_inner","eng_ads","eng_outer"],this.widget_wrapper_elm=null,this.widget_add_data=null,this.is_widget_wrapper_dom_ready=!1,this.is_user_initiated_event=!1,this.data_json=null,this.is_real_imps_called=!1,this.visible_posts_and_types=[],this.load_time_start=(new Date).getTime(),this.widget_direction="left",this.widget_op_direction="right",this.click_pixels=t.cpxls?t.cpxls:"",this.premium_pub_ids=[158041],this.max_num_of_image_load_retries=6,this.image_load_retries_arr={},this.widget_ready_cb=t.wrcb||null,this.log_types={ALL:"ALL",WARNING:"WARNING",INFO:"INFO",ERROR:"ERROR"},this.log_printout=null,this.pp_recs_website_ids=[],this.total_slides=null,this.get_post_cb="_eng_gpcb_"+this.random_id,this.align_dims_post_ids=[-140621],this.num_of_align_dims_retries=20,this.is_multi_widgets=t.ismw||null,this.is_multi_widgets_initiator=!1,this.exclude_posts_reasons_arr=[{val:1,title:"Uninteresting"},{val:2,title:"Misleading"},{val:3,title:"Offensive"},{val:4,title:"Repetitive"},{val:5,title:"Other"}],this.is_show_exclude_box=!1,this.exclude_posts_box_default_thank_you="Thank You! <br> We will try not to show you this content anymore.",this.srPlayer=null,this.externalAdditionalDataTypes={STREAM_RAIL:1},this.place_holders={WIDTH:"[WIDTH]",HEIGHT:"[HEIGHT]",PAGE_URL:"[PAGE_URL]",DNT:"[DO_NOT_TRACK]",CACHE_BUSTER:"[CACHE_BUSTER]",PAGE_TITLE:"[PAGE_TITLE]",SUB_ID:"[SUB_ID]"},this.srail_dims={width:0,height:0},this.srail_options={},this.is_super_native=!1,this.ad_real_impression_pixels=[],this.ad_click_pixels=[],this.pixels_consts={ENG_PIXEL_TRACK_IMP:"ENG_PIXEL_TRACK_IMP",ENG_PIXEL_TRACK_RIMP:"ENG_PIXEL_TRACK_RIMP",ENG_PIXEL_TRACK_CLK:"ENG_PIXEL_TRACK_CLK"}};ENGAGEYA_MULTI_WIDGETS=function(t){ENGAGEYA.call(this,t),this.input_obj=t,this.multi_widget_ids=t.mwids,this.multi_widget_ids_arr=t.mwids.split(","),this.is_multi_widgets_initiator=!0};var ENGAGEYA_VIDEO=function(t){ENGAGEYA.call(this,t),this.video_types_const={VAST:"VAST",DIRECT:"DIRECT"},this.video_types=["",this.video_types_const.VAST,this.video_types_const.DIRECT],this.video_event_types={AD_START:"AS",AD_FIRST_QUARTILE:"FQ",AD_MID_POINT:"MP",AD_THIRD_QUARTILE:"TQ",AD_COMPLETE:"CO",AD_CLICK:"CLK",ALL_ADS_COMPLETED:"ALADCM",AD_TIMEOUT:"TOUT",ADS_READY:"ADRDY",AD_ERROR:"ADER"},this.auto_play="autoplay",this.is_muted=!0,this.load_on_view_percents=0,this.play_video_on_view_percents={top:20,bottom:0},this.pause_video_on_not_view_percents={top:1,bottom:1},this.is_video_was_on_view=!1,this.videojs_path="//widget.engageya.com/videojs/",this.videojs_js_files=["video.js","//imasdk.googleapis.com/js/sdkloader/ima3.js","videojs.as.js","videojs.ima.js"],this.videojs_css_files=["video-js.css","videojs.as.css","videojs.ima.css"],this.is_load_videojs_called=!1,this.is_video_js_fully_loaded=!1,this.is_video_should_be_paused=!1,this.is_display_controls=!0,this.is_video_tag_populated=!1,this.video_sources=[{src:"//widget.engageya.com/videojs/dummy_video.mp4",type:"video/mp4"}],this.is_close_player_when_ads_completed=!0,this.video_view_ratio=null,this.is_add_href=!1,this.skip_offest=-1,this.fire_click_events=[],this.is_unmute_on_mouse_over=!0,this.is_close_video_on_ad_timeout=!1,this.is_close_video_on_ad_error=!0,this.log_printout="ALL",this.video_volume=1,this.video_load_ad_timeout=5e3,this.is_window_active=!0,this.is_run_only_on_window_active=!0,this.preload="auto",this.ads_manager=null,this.ads_ready=!1,this.is_play_command_sent=!1};ENGAGEYA_VIDEO.prototype=new ENGAGEYA({}),ENGAGEYA_MULTI_WIDGETS.prototype=new ENGAGEYA({}),ENGAGEYA.prototype.run=function(){1==this.is_video_widget?this.attach_player_events():this.start_run()},ENGAGEYA.prototype.attach_player_events=function(){1==this.plr_type?this.attach_jwplayer_events():2==this.plr_type?this.attach_flowplayer_events():this.attach_generic_player_events(),1==this.is_widget_autorun&&this.start_run()},ENGAGEYA.prototype.attach_jwplayer_events=function(){var t=this;jwplayer(this.plr_elm_id).onPlay(function(){t.on_play_action()}),jwplayer(this.plr_elm_id).onBuffer(function(){t.on_play_action()}),jwplayer(this.plr_elm_id).onPause(function(){t.on_pause_action()}),jwplayer(this.plr_elm_id).onIdle(function(){t.on_idle_action()}),jwplayer(this.plr_elm_id).onComplete(function(){t.on_complete_action()}),this.plr_get_state_fnc=jwplayer(this.plr_elm_id).getState,this.state_events()},ENGAGEYA.prototype.attach_flowplayer_events=function(){var t=this,i=null;i=flowplayer(this.plr_elm_id)?flowplayer(this.plr_elm_id):flowplayer();try{i.onStart(function(){t.on_play_action()}),i.onLoad(function(){t.on_play_action()}),i.getClip().onResume(function(){t.on_play_action()}),i.getClip().onPause(function(){t.on_pause_action()}),i.getClip().onStop(function(){t.on_pause_action()}),i.getClip().onFinish(function(){t.on_complete_action()}),this.plr_get_state_fnc=i.getState}catch(e){i.bind("load",function(i,e){t.on_play_action()}),i.bind("click",function(i,e){t.is_user_initiated_event=!0}),i.bind("resume",function(i,e){t.on_play_action()}),i.bind("pause",function(i,e){t.is_user_initiated_event&&(t.on_pause_action(),t.is_user_initiated_event=!1)}),i.bind("stop",function(i,e){t.on_pause_action()}),i.bind("finish",function(i,e){t.on_complete_action()}),this.plr_get_state_fnc=function(){return 1}}this.state_events()},ENGAGEYA.prototype.attach_generic_player_events=function(){var t=this;try{var i=window[this.plr_func_name](this.plr_elm_id)}catch(t){}i=(i=i||window[this.plr_func_name])||document.getElementById(this.plr_elm_id);try{i.onStart(function(){t.on_play_action()})}catch(t){}try{i.onLoad(function(){t.on_play_action()})}catch(t){}try{i.onPlaying(function(){t.on_play_action()})}catch(t){}try{i.onplay=function(){t.on_play_action()}}catch(t){}try{i.onPlay(function(){t.on_play_action()})}catch(t){}try{i.onBuffer(function(){t.on_play_action()})}catch(t){}try{i.onResume(function(){t.on_play_action()})}catch(t){}try{i.onPause(function(){t.on_pause_action()})}catch(t){}try{i.onpause=function(){t.on_pause_action()}}catch(t){}try{i.onStop(function(){t.on_pause_action()})}catch(t){}try{i.onFinish(function(){t.on_complete_action()})}catch(t){}try{i.onended=function(){t.on_complete_action()}}catch(t){}try{i.onComplete(function(){t.on_complete_action()})}catch(t){}try{this.plr_get_state_fnc=i.getState||function(){return 1}}catch(t){}this.state_events()},ENGAGEYA.prototype.on_play_action=function(){this.hide_widget(this),this.start_run()},ENGAGEYA.prototype.on_pause_action=function(){1==this.show_on_pause&&this.is_widget_wrapper_dom_ready&&this.show_widget()},ENGAGEYA.prototype.on_idle_action=function(){1==this.show_on_idle&&this.show_widget()},ENGAGEYA.prototype.on_complete_action=function(){1==this.show_on_complete&&this.show_widget()},ENGAGEYA.prototype.state_events=function(){this.is_load_recs_state()&&this.start_run()},ENGAGEYA.prototype.is_load_recs_state=function(){var t=this.plr_get_state_fnc();return this.in_array(t,this.get_recs_states[this.plr_type])},ENGAGEYA.prototype.show_widget=function(){this.jq("#eng_recs_holder_"+this.random_id).fadeIn("slow"),this.align_widget_elements()},ENGAGEYA.prototype.hide_widget=function(t){try{this.jq("#eng_recs_holder_"+t.random_id).hide()}catch(t){}},ENGAGEYA.prototype.attach_widget_events=function(){try{var t=this;this.load_real_imps_events(),this.widget_imgs_events(),this.widget_clicks_events(),this.posts_exclusion_box_events(),this.jq("#eng_ww_close_"+this.random_id).click(function(){t.hide_widget(t)})}catch(t){console.log("ERROR - events:"),console.log(t)}},ENGAGEYA.prototype.widget_clicks_events=function(){this.attach_on_click_pixel_event()},ENGAGEYA.prototype.attach_on_click_pixel_event=function(){var t=this;if(t.click_pixels)try{for(var i=0;i<t.click_pixels.length;i++){for(var e=t.click_pixels[i],_=e.urls.split(";"),s="",n=0;n<_.length;n++)e.etype&&0!=e.etype?1==e.etype&&(s=_):s+='<img src="'+_[n]+'" style="display:none;" width="1px" height="1px" />';var o=".eng_widget_href,.eng_m_widget_href";if(0!=e.type){var a=t.rec_types[e.type];o=".eng_widget_href."+a+",.eng_m_widget_href."+a}e.etype&&0!=e.etype?1==e.etype&&t.get_recs_holder_elm().find(o).mousedown({pxls:s},function(t){try{for(var i=t.data.pxls,e=0;e<i.length;e++){var _=i[e],s=_.match("engcval_(.*?)['|\"],");if(s&&s.length>1){var n="engcval_"+s[1],o=".*?href=.*?"+s[1]+"=(.*?)&",a=this.outerHTML.match(o);if(a&&a[1]){var r=decodeURIComponent(a[1]);_=_.replace(n,r)}}ga("send",_)}}catch(t){console.log("ERROR - ga click event"),console.log(t)}}):t.get_recs_holder_elm().find(o).mousedown({pxls:s},function(i){t.jq(this).append(i.data.pxls)})}}catch(t){console.log("ERROR - click pixel"),console.log(t)}},ENGAGEYA.prototype.widget_imgs_events=function(){this.attach_on_img_error_event(),this.attach_on_hover_brand_img_event(),this.attach_on_img_load_event()},ENGAGEYA.prototype.attach_on_hover_brand_img_event=function(){var t=this,i=this.get_add_data("brnd");i&&i.imghvr&&t.get_recs_holder_elm().hover(function(){t.jq(this).find("#eng_brnd_img_"+t.widget_id).attr("src",i.imghvr)},function(){t.jq(this).find("#eng_brnd_img_"+t.widget_id).attr("src",i.img.src)}),i&&i.img2hvr&&t.get_recs_holder_elm().hover(function(){t.jq(this).find("#eng_brnd_img2_"+t.widget_id).attr("src",i.img2hvr)},function(){t.jq(this).find("#eng_brnd_img2_"+t.widget_id).attr("src",i.img2.src)})},ENGAGEYA.prototype.attach_on_img_load_event=function(){var t=this,i=function(){try{if(t.is_run_srail_started)return;t.run_streamrail_video()}catch(t){}},e=t.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img");void 0!==e.error?e.load(i):e.on("load",i)},ENGAGEYA.prototype.attach_on_img_error_event=function(){var t=this,i=function(){try{var i=1*this.outerHTML.match(".*?_img_(.*?)_.*")[1],e=t.image_load_retries_arr[i];if(void 0===e&&(e=t.max_num_of_image_load_retries,t.image_load_retries_arr[i]=e),e<1)t.set_default_image(t,this);else{t.image_load_retries_arr[i]--;var _=this.src.match(".*?//.*?(/.*)")[1],s="";s=t.image_load_retries_arr[i]%2==0?t.aws_images_url+_:t.cdn_images_url+_;var n=this;window.setTimeout(function(){n.src=s+"?"+ +new Date},300)}}catch(i){console.log("ERROR:"),console.log(i),t.set_default_image(t,this)}},e=function(){var i=this.outerHTML.match(".*?_img_(.*?)_.*");if(i){i[1];t.jq(this).unbind("error")}},_=t.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img");void 0!==_.error?(_.error(i),_.load(e)):(_.on("error",i),_.on("load",e))},ENGAGEYA.prototype.set_default_image=function(t,i){var e=Math.floor(3*Math.random()+1),_=t.custom_default_image||"//"+t.default_imgs_url+"def/def_"+e+".jpg";t.jq(i).unbind("error").attr("src",_)},ENGAGEYA.prototype.start_run=function(){"complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState?this.doc_ready(this):this.inj_init_binding(this)},ENGAGEYA.prototype.generate_random_number=function(){return Math.ceil(1e7*Math.random())},ENGAGEYA.prototype.doc_ready=function(t){t.doc_ready_called||(t.doc_ready_called=!0,t.load_jQuery(),t.validate_jquery_loaded(this))},ENGAGEYA.prototype.validate_jquery_loaded=function(t){if(t.jq)t.inner_run();else if(window.jQuery)t.jq=window.jQuery,t.isNoConflictJquery&&jQuery.noConflict(),t.inner_run();else if(--t.num_of_jq_attempts>0)return void window.setTimeout(function(){t.validate_jquery_loaded(t)},100)},ENGAGEYA.prototype.load_jQuery=function(){window.jQuery?this.jq=window.jQuery:this.append_script_to_head("//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js","")},ENGAGEYA_MULTI_WIDGETS.prototype.inner_run=function(t){for(var i=t||this,e=0;e<i.multi_widget_ids_arr.length;e++){var _=i.input_obj,s=i.multi_widget_ids_arr[e];_.wid=s,_.wwei=_.wweprfx+s,new ENGAGEYA(_).run()}window[i.cb]=function(t){for(var i=0;i<_ENGAGEYA_WIDGETS.length;i++)for(var e=0;e<t.length;e++)if(_ENGAGEYA_WIDGETS[i].widget_id==t[e].widget.id){var _=_ENGAGEYA_WIDGETS[i],s=t[e];s.rndid=_.random_id,window[_.cb](s)}};var n=i.get_page_url(),o=(i.get_lang(),i.get_page_ttl()),a=i.get_meta_content("keywords","content"),r=document.characterSet?document.characterSet:document.charset,d="//"+i.multi_widgets_recs_url+"?cb="+i.cb+"&pubid="+i.publisher_id+"&webid="+i.website_id+"&mwids="+i.multi_widget_ids+"&recsnum="+i.num_of_slides+"&url="+n+"&cs="+r+"&subid="+i.subid+"&title="+o+"&kwrds="+a+"&rndid="+i.random_id;i.append_script_to_head(d,i.random_id)},ENGAGEYA.prototype.inner_run=function(t){var i=t||this;if(window[i.cb]=function(t){if(t&&t.recs.length>0){for(var i=null,e=!1,_=0;_<_ENGAGEYA_WIDGETS.length;_++)if(void 0!==t.rndid&&_ENGAGEYA_WIDGETS[_].random_id==t.rndid){i=_ENGAGEYA_WIDGETS[_],t.widget.id=_ENGAGEYA_WIDGETS[_].widget_id,e=!0;break}if(!e)for(_=0;_<_ENGAGEYA_WIDGETS.length;_++)if(_ENGAGEYA_WIDGETS[_].widget_id==t.widget.id){i=_ENGAGEYA_WIDGETS[_],e=!0;break}if(i){i.data_json=t,i.widget_id=t.widget.id;var s={widget:t.widget.additionalData||"{}",network:t.widget.anad||"{}"};i.populate_add_data(s),i.populate_widget_data(t),i.reposition_widget(),i.build_layout(),i.add_player_wmode(),i.attach_widget_events(),i.run_criteo(),i.run_google_tags(),i.run_posts_preview(),i.run_widget_alignments(),i.widget_ready()}}},i.widget_wrapper_elm=document.getElementById(i.widget_wrapper_elm_id),!i.widget_wrapper_elm)return i.find_wrapper_elm_retries>0?(i.find_wrapper_elm_retries--,void window.setTimeout(function(){i.inner_run(i)},50)):void console.log("INFO: Couldn't find element "+i.widget_wrapper_elm_id);i.create_placement(),i.is_widget_wrapper_dom_ready=!0;var e=i.get_page_url(),_=i.get_lang(),s=i.get_page_ttl(),n=i.get_meta_content("keywords","content"),o=document.characterSet?document.characterSet:document.charset,a="",r="";i.set_urls_for_pp(),i.is_multi_widgets||(1==i.is_index_page?(i.is_premium()&&(i.recs_url=i.recs_url_premium),a="//"+i.recs_url+"?cb="+i.cb+"&pubid="+i.publisher_id+"&webid="+i.website_id+"&wid="+i.widget_id+"&recsnum="+i.num_of_slides+"&url="+e+"&cs="+o+"&subid="+i.subid+"&title="+s+"&kwrds="+n+"&rndid="+i.random_id,r="//"+i.pp_recs_url+"?cb=temp123&pubid="+i.publisher_id+"&webid="+i.website_id+"&wid="+i.widget_id+"&recsnum="+i.num_of_slides+"&url="+e+"&cs="+o+"&subid="+i.subid+"&title="+s+"&kwrds="+n+"&rndid="+i.random_id):a="//"+i.feed_url+"?cb="+i.cb+"&format=json&action=paid&url="+e+"&count="+i.num_of_slides+"&min_count="+i.min_slides+"&is_xpath=0&lang="+_+"&cs="+o+"&pid="+i.pid+"&subid="+i.subid+"&title="+s+"&kwrds="+n,i.append_script_to_head(a,i.random_id),i.is_do_pp_recs_call&&r&&(window.temp123=function(){},i.append_script_to_head(r,"temp_"+i.random_id))),_ENGAGEYA_WIDGETS.push(i)},ENGAGEYA.prototype.set_urls_for_pp=function(){this.in_array(this.website_id,this.pp_recs_website_ids)&&(this.recs_url=this.recs_url.replace("recs","recs2"),this.event_url=this.event_url.replace("recs","recs2"))},ENGAGEYA.prototype.load_real_imps_events=function(){var t=this.data_json.widget;if(t&&t.isRealImpressions){var i=function(t){return function(){var i=t.is_elm_visible(t.widget_wrapper_elm);if(i&&!t.is_real_imps_called){t.is_real_imps_called=!0;var e=t.data_json,_=t.visible_posts_and_types;if(_.length>0){for(var s="",n=0;n<_.length;n++)s+=_[n].pi+":"+_[n].pt,n!=_.length-1&&(s+=",");var o=(new Date).getTime()-t.load_time_start;t.fire_real_impression_pixels();var a=document.createElement("img");a.src="//"+t.event_url+"?irid="+e.requestId+"&webid="+e.srcWebsiteId+"&wid="+e.srcWidgetId+"&spid="+e.srcPostId+"&tpids="+s+"&tti="+o+"&ucc="+e.requestGeoCountry;try{document.getElementsByTagName("head")[0].appendChild(a)}catch(t){console.log("ERROR - real imps:"),console.log(t)}}}return i}}(this);window.addEventListener?(addEventListener("DOMContentLoaded",i,!1),addEventListener("load",i,!1),addEventListener("scroll",i,!1),addEventListener("resize",i,!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",i),attachEvent("onload",i),attachEvent("onscroll",i),attachEvent("onresize",i))}},ENGAGEYA.prototype.run_criteo=function(){if(this.get_add_data("criteo")){var t=document.createElement("script");t.type="text/javascript",t.src="//widget.engageya.com/eng_crt_loader2.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}},ENGAGEYA.prototype.run_google_tags=function(){if(this.google_tags&&!_ENG_is_google_tag_ran){_ENG_is_google_tag_ran=!0,this.append_script_to_head(this.google_tag_script_url,"");for(var t=0;t<this.google_tags.length;t++){var i=this.google_tags[t].gtn,e=this.google_tags[t].sys,_=this.google_tags[t].id,s=this.google_tags[t].idx,n=this.get_slide_elm_by_idx(s);n&&(n.id=_,n.innerHTML="",function(t,i,e){googletag.cmd.push(function(){googletag.defineSlot(t,[i],e).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.enableServices()})}(i,e,_),function(t){googletag.cmd.push(function(){googletag.display(t)})}(_))}}},ENGAGEYA.prototype.run_posts_preview=function(){try{var t=document.referrer,i=[];if(__eng__ppids_brnd="",t&&-1!=t.indexOf("_eng_ppids")){var e=this.getQS(t);e&&e._eng_ppids&&(i=e._eng_ppids.split(","),__eng__ppids_brnd=e._eng_dname)}if(!i||0==i.length){var _=this.get_cookie("_eng_ppids");_&&(i=_.split(","));var s=this.get_cookie("_eng_dname");s&&(__eng__ppids_brnd=s)}i&&i.length>0&&this.get_posts_for_preview(i)}catch(t){}},ENGAGEYA.prototype.run_streamrail_video=function(t){this.is_run_srail_started=!0;var i=this,e=this.data_json.widget&&this.data_json.widget.esaData&&this.data_json.widget.esaData[this.externalAdditionalDataTypes.STREAM_RAIL];if(this.set_srail_elm_dims(),e&&!this.is_enough_space_for_streamrail()){if(void 0===t&&(t=20),t<0)return;return void window.setTimeout(function(){i.run_streamrail_video(--t)},100)}if(e&&this.is_enough_space_for_streamrail())try{this.set_srail_final_player_dims();var _=JSON.parse(e);if(this.srail_options=_,!this.is_load_srail())return;var s=this.jq(this.widget_wrapper_elm).find(".eng_branding,.eng_m_branding"),n=this.generate_streamrail_elm();s.length>0&&n&&(this.jq(n).insertBefore(s),this.populate_srail_placeholders(_),this.run_streamrail_ads(_))}catch(t){console.log("ERROR:"),console.log(t)}},ENGAGEYA.prototype.is_load_srail=function(){if(this.srail_options&&this.srail_options.pacingRatio){var t=1*this.srail_options.pacingRatio;if(Math.random()>t)return!1}return!0},ENGAGEYA.prototype.populate_srail_placeholders=function(t){if(t&&t.ads)try{var i=this.jq("#"+this.get_srail_elm_id()),e=t.ads.schedule[0].server.tag;e=(e=(e=(e=(e=(e=e.replace(this.place_holders.WIDTH,i.width())).replace(this.place_holders.HEIGHT,i.height())).replace(this.place_holders.DNT,document.location.hostname)).replace(this.place_holders.SUB_ID,this.widget_id)).replace(this.place_holders.PAGE_URL,this.get_page_url())).replace(this.place_holders.CACHE_BUSTER,this.generate_random_number()),t.ads.schedule[0].server.tag=e}catch(t){console.log("ERROR:"),console.log(t)}},ENGAGEYA.prototype.is_enough_space_for_streamrail=function(){return this.srail_dims.height>=250&&this.srail_dims.width>=300},ENGAGEYA.prototype.set_srail_elm_dims=function(){var t=this.jq(this.widget_wrapper_elm);if(t&&t.length>0){var i=t.find(".eng_asw,.eng_m_asw");i&&i.length>0&&(this.srail_dims.height=i.height(),this.srail_dims.width=i.width(),console.log("DIMS- Height: "+this.srail_dims.height+", Width: "+this.srail_dims.width))}},ENGAGEYA.prototype.set_srail_final_player_dims=function(){var t={width:this.srail_dims.width,height:Math.ceil(this.srail_dims.width/1.777777)};t.height>250?this.srail_dims.height>=t.height?this.srail_dims=t:this.srail_dims.width=Math.floor(1.777777*this.srail_dims.height):this.srail_dims={width:300,height:250}},ENGAGEYA.prototype.get_srail_elm_id=function(){return"eng_srail_"+this.widget_id},ENGAGEYA.prototype.get_srail_wrapper_elm_id=function(){return"eng_w_srail_"+this.widget_id},ENGAGEYA.prototype.run_streamrail_ads=function(t){if(_ENG_is_sr_started_loading)this.wait_for_srail_init(t,20);else{this.get_srail_elm_id();var i=this;_ENG_is_sr_started_loading=!0,window.srAsyncInit=function(){i.init_srail_player(t)},function(t,i,e){var _,s=t.getElementsByTagName(i)[0];t.getElementById(e)||((_=t.createElement(i)).id=e,_.src="https://sdk.streamrail.com/player/sr.ads.js",s.parentNode.insertBefore(_,s))}(document,"script","streamrail-jssdk")}},ENGAGEYA.prototype.wait_for_srail_init=function(t,i){if(console.log("retries: "+i),!(i<0)){var e=this;"undefined"==typeof SR?window.setTimeout(function(){e.wait_for_srail_init(t,--i)},100):e.init_srail_player(t)}},ENGAGEYA.prototype.init_srail_player=function(t){var i=this.get_srail_elm_id();this.srPlayer=SR(i,t),this.subscribe_srplayer_events()},ENGAGEYA.prototype.subscribe_srplayer_events=function(){this.srPlayer&&(this.attach_srail_visibility_events(),this.attach_srail_mouse_over_event(),this.attach_srail_mouse_out_event())},ENGAGEYA.prototype.attach_srail_visibility_events=function(){var t=this.srPlayer,i=this;["AdImpression"].map(function(e){t.on(e,function(t){i.animate_show_srplayer()})}),["AdVideoComplete"].map(function(e){t.on(e,function(t){i.animate_hide_srplayer()})})},ENGAGEYA.prototype.attach_srail_mouse_over_event=function(){var t=this,i=this.srail_options;this.jq("#"+this.get_srail_elm_id()).mouseover(function(){i&&i.unmuteOnHover&&(t.srPlayer.muted(!1),t.srPlayer.volume(1))})},ENGAGEYA.prototype.attach_srail_mouse_out_event=function(){var t=this,i=this.srail_options;this.jq("#"+this.get_srail_elm_id()).mouseout(function(){!t.srPlayer.muted()&&i.unmuteOnHover&&t.srPlayer.muted(!0)})},ENGAGEYA.prototype.animate_show_srplayer=function(){var t=this.jq("#"+this.get_srail_elm_id()),i=this.jq("#"+this.get_srail_wrapper_elm_id());t.css("z-index",0),i.css("border-bottom","1px solid #ccc"),i.css("paddingTop","10px"),i.css("paddingBottom","10px"),t.animate({marginTop:"0px",opacity:1},1e3)},ENGAGEYA.prototype.animate_hide_srplayer=function(){var t=this.jq("#"+this.get_srail_elm_id()),i=this.jq("#"+this.get_srail_wrapper_elm_id());t.animate({marginTop:"-"+this.srail_dims.height+"px",opacity:0},500,function(){i.hide()})},ENGAGEYA.prototype.generate_streamrail_elm=function(){var t=document.createElement("div"),i="eng_srail_"+this.widget_id;t.id=i,t.className="eng_srail";var e=document.createElement("style");e.type="text/css";var _="#"+i+"{width:"+this.srail_dims.width+"px;height:"+this.srail_dims.height+"px;margin-top:-"+this.srail_dims.height+"px;}";e.styleSheet?e.styleSheet.cssText=_:e.appendChild(document.createTextNode(_));var s=document.createElement("div");return s.id="eng_w_srail_"+this.widget_id,s.className="eng_w_srail",s.appendChild(t),s.appendChild(e),s},ENGAGEYA.prototype.run_widget_alignments=function(){this.align_widget_text_height(),this.align_widget_dims()},ENGAGEYA.prototype.align_widget_text_height=function(){if(this.is_align_widget_text_height){var t=-1,i=this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_in,.eng_ads .eng_widget_in"),e=this;this.jq.each(i,function(i,_){e.jq(_).height()&&(t=Math.max(e.jq(_).height(),t))}),t>0&&this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_in,.eng_ads .eng_widget_in").css("min-height",t)}},ENGAGEYA.prototype.align_widget_dims=function(t){try{if(void 0===t&&(t=this.num_of_align_dims_retries),t<0)return;for(var i=!1,e=0;e<this.visible_posts_and_types.length;e++){var _=this.visible_posts_and_types[e];if(_&&_.pi&&this.in_array(_.pi,this.align_dims_post_ids)){i=!0;break}}if(i){var s=-1,n=this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_img,.eng_inner .eng_m_widget_img"),o=this;n.length>0?s=this.jq(n[0]).height():(n=this.jq(this.widget_wrapper_elm).find(".eng_widget_img,.eng_m_widget_img"),this.jq.each(n,function(t,i){o.jq(i).height()<300&&(s=Math.max($(i).height(),s))})),s>50?this.jq(this.widget_wrapper_elm).find(".eng_widget_img,.eng_m_widget_img").height(s):window.setTimeout(function(){o.align_widget_dims(--t)},100)}}catch(t){console.log("ERROR - widget align dims:"),console.log(t)}},ENGAGEYA.prototype.get_posts_for_preview=function(t){var i=this.shuffle_array(t);if(this.total_slides){window[this.get_post_cb]=function(t){var i=_ENGAGEYA_WIDGETS[0],e=i.jq(".eng_widget_href:not(.eng_test_ppid),.eng_m_widget_href:not(.eng_test_ppid)");if(e&&e.length>0){var _=i.jq(e[0]),s=_.find(".eng_widget_img, eng_m_widget_img"),n=_.find(".eng_widget_in,.eng_m_widget_in"),o=_.find(".eng_m_widget_in"),a=_.find(".eng_widget_is,.eng_m_widget_is"),r=_.find(".eng_widget_dn,.eng_m_widget_dn"),d=s.attr("src").match(".*_([0-9]*)..*");if(d&&d[1]){var l=d[1];_.attr("href",t.url),_.attr("onmousedown",""),a.text(t.title);var h=t.thumbnailPath.replace(/(.*_)([0-9]*)(\..*)/,"$1"+l+"$3");s.attr("src",h),_.addClass("eng_test_ppid");var g=decodeURIComponent(__eng__ppids_brnd);if(r&&r.length>0)r.text(g);else{var p=o&&o.length>0?"eng_m_widget_dn":"eng_widget_dn";n.append('<span class="'+p+'">'+g+"</span>")}}}console.log(t)};for(var e=Math.min(i.length,this.total_slides),_=0;_<e;_++){var s=i[_];this.append_script_to_head("http://recs.engageya.com/rec-api/getPost.json?cb="+this.get_post_cb+"&PostId="+s,"")}}},ENGAGEYA.prototype.shuffle_array=function(t){for(var i=t.length-1;i>0;i--){var e=Math.floor(Math.random()*(i+1)),_=t[i];t[i]=t[e],t[e]=_}return t},ENGAGEYA.prototype.get_cookie=function(t){var i=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return i?i[1]:null},ENGAGEYA.prototype.get_slide_elm_by_idx=function(t){return document.getElementById("eng_sw_"+t+"_"+this.widget_id)||document.getElementById("eng_m_sw_"+t+"_"+this.widget_id)},ENGAGEYA.prototype.widget_ready=function(){this.widget_ready_cb&&this.widget_ready_cb()},ENGAGEYA.prototype.isShouldBeRTL=function(t){try{-1!=t.indexOf("&#")&&(t=this.decode_html(t));var i=/[\u0590-\u083F]|[\u08A0-\u08FF]|[\uFB1D-\uFDFF]|[\uFE70-\uFEFF]/gm;if(!t.match(i))return!1}catch(i){console.log("ERROR: text direction - "+t)}return!0},ENGAGEYA.prototype.decode_html=function(t){try{return this.jq("<textarea/>").html(t).text()}catch(i){return t}},ENGAGEYA.prototype.is_elm_visible=function(t){var i=t.getBoundingClientRect();try{return i.bottom>100&&i.right>0&&i.left<(window.innerWidth||document.documentElement.clientWidth)&&i.top<(window.innerHeight||document.documentElement.clientHeight)-100}catch(t){return!1}},ENGAGEYA.prototype.is_premium=function(){try{var t=this.publisher_id,i=this.premium_pub_ids;return!(!t||!this.in_array(t,i))}catch(t){return!1}},ENGAGEYA.prototype.populate_widget_data=function(t){try{var i=t.widget,e=i.layoutTypeId;this.widget_img_size=26==e?4:2,this.vertical_widget_img_size=null;var _=this.get_add_data("jsvls");_&&_.vcis&&this.is_mobile_conditions_satisfied()&&(this.vertical_widget_img_size=_.vcis),this.is_order_by_post_id&&this.sort_results_by_post_id(),3==i.returnRecsTypeId&&(this.is_super_native=!0)}catch(t){console.log("ERROR - widget data:"),console.log(t)}},ENGAGEYA.prototype.sort_results_by_post_id=function(){var t=this.data_json.srcWebsiteId,i=this.jq.extend({},this.data_json.recs),e=[];for(var _ in i)i[_].partner_id==t&&e.push(i[_]);e.sort(function(t,i){return i.postId-t.postId});for(var s=0;s<this.data_json.recs.length;s++)this.data_json.recs[s].partner_id==t&&e[s]&&(this.data_json.recs[s]=e[s])},ENGAGEYA.prototype.reposition_widget=function(){if(this.widget_wrapper_positioning_obj){var t=this.widget_wrapper_positioning_obj.elm,i=this.widget_wrapper_positioning_obj.type;if(this.jq(t).length>0){var e=this.jq(this.widget_wrapper_elm).detach();switch(i){case 0:e.appendTo(t);break;case 1:e.prependTo(t);break;case 2:e.insertAfter(t);break;case 3:e.insertBefore(t);break;default:e.appendTo(t)}this.width=null,this.calculate_widget_wrapper_dims()}}},ENGAGEYA.prototype.populate_add_data=function(t){try{var i=JSON.parse(t.widget.replace(/\[rid\]/g,this.random_id)),e=JSON.parse(t.network.replace(/\[rid\]/g,this.random_id));!i.brnd&&e&&e.brnd&&(i.brnd=e.brnd),this.widget_add_data=i;var _=this.widget_add_data.jcss||{},s=this.widget_add_data.jsvls||{},n=this.widget_add_data.gtags;this.is_show_exclude_box=s.issexbox||!1,this.slide_height=_.sh||(this.is_video_widget?150:115),this.slide_width=_.sw||(this.is_video_widget?200:140),this.slide_horz_margin=_.shm||10,this.widget_lpadding=_.wlp||(this.is_video_widget?15:0),this.widget_rpadding=_.wrp||(this.is_video_widget?15:0),this.widget_rmargin=_.wrm||(this.is_video_widget?2:0),this.widget_lmargin=_.wlm||(this.is_video_widget?2:0),this.slides_wrapper_lpadding=_.swlp||0,this.slides_wrapper_rpadding=_.swrp||0,this.slides_wrapper_lmargin=_.swlm||0,this.slides_wrapper_rmargin=_.swrm||0,this.slide_bpadding=_.sbp||(this.is_video_widget?15:5),this.slide_tpadding=_.stp||(this.is_video_widget?15:5),this.widget_txt_direction=_.wtdir||null,this.widget_img_size=s.cis||2,this.num_of_slides_a_row=s.spr||(this.is_video_widget?3:null),this.num_of_mobile_slides_a_row=s.mspr||(this.is_video_widget?3:null),this.is_cancel_click_bubble=s.iccb||!1,this.max_width_for_mobile=s.mwfm||420,this.is_vertical_mobile_widget=void 0===s.ivmw||0!=s.ivmw,this.is_force_vertical_layout=s.ifvl||!1,this.num_of_mobile_slides=s.noms||6,this.is_default_brand=!this.website_id||this.website_id<127432?s.isdb:void 0===s.isdb||0!=s.isdb,this.title_elm_type=s.ttlelm?s.ttlelm:"div",this.width=s.rplcwidth&&s.rplcwidthval&&s.rplcwidth==Math.floor(this.width)?s.rplcwidthval:this.width,this.widget_wrapper_positioning_obj=s.wwpo?s.wwpo:null,this.max_width_for_tablet_cls=s.mwftc||null,this.image_size_for_rec_num=s.cisfrm||null,this.is_order_by_post_id=s.iobpi||null,this.custom_default_image=s.cdi||null,this.is_description_span=s.idesc||null,this.is_links_open_new_window=s.inw||null,this.max_description_chars=s.mdc||1e3,this.max_mobile_description_chars=s.mmdc||1e3,this.max_abstract_chars=s.mabsc||500,this.max_mobile_abstract_chars=s.mmabsc||500,this.max_title_chars=s.mtc||100,this.max_mobile_title_chars=s.mmtc||150,this.postfix_for_cutted_description=null!=s.pfcd?s.pfcd:"...",this.postfix_for_cutted_title=null!=s.pfct?s.pfct:"...",this.postfix_for_cutted_abstract=null!=s.pfcabs?s.pfcabs:"...",this.is_meta_tags_span=s.imtag||null,this.is_default_images=!s.idi,this.is_align_widget_text_height=void 0!==s.iawth&&s.iawth,this.google_tags=n}catch(t){console.log("ERROR - additional data:"),console.log(t)}},ENGAGEYA.prototype.get_add_data=function(t){return this.widget_add_data&&this.widget_add_data[t]?this.widget_add_data[t]:null},ENGAGEYA.prototype.set_add_data=function(t,i){this.widget_add_data[t]=i},ENGAGEYA.prototype.add_player_wmode=function(){},ENGAGEYA.prototype.get_page_url=function(){if(this.input_url)return this.input_url;var t=document.location.href;return this.is_in_iframe()&&(t=document.referrer?document.referrer:t),t=encodeURIComponent(t)},ENGAGEYA.prototype.get_total_slides=function(t,i){for(var e=this.num_of_slides_a_row*t;e>i&&t>1;)t--,e=this.num_of_slides_a_row*t;return this.is_mobile_conditions_satisfied()&&(e=this.num_of_mobile_slides?this.num_of_mobile_slides:e),e=e>i?i:e},ENGAGEYA.prototype.get_script=function(t,i){this.jq.ajax({type:"GET",url:t,success:i,dataType:"script",cache:!0})},ENGAGEYA.prototype.logger=function(t,i){this.log_printout&&(this.log_printout==this.log_types.ALL||this.in_array(t,this.log_printout))&&console.log(t+": "+i)},ENGAGEYA.prototype.generate_img_pixel=function(t){var i=document.createElement("img");i.width=1,i.height=1,i.src=t,this.widget_wrapper_elm.appendChild(i)},ENGAGEYA.prototype.is_mobile_conditions_satisfied=function(){return!!(!this.is_video_widget&&this.is_mobile()&&this.width<this.max_width_for_mobile)},ENGAGEYA.prototype.build_layout=function(){1==this.is_vertical_mobile_widget&&this.is_mobile_conditions_satisfied()||this.is_force_vertical_layout?this.build_vertical_layout():this.build_horizontal_layout()},ENGAGEYA.prototype.build_vertical_layout=function(){var t=this.data_json,i=Math.min(this.num_of_mobile_slides,t.recs.length);this.total_slides=i;var e=this.get_recs_holder_elm(),_="eng_m_top_ww_widget_"+this.random_id,s=this.get_tablet_cls(),n=this.get_mobile_device_OS(),o='<div class="eng_m_top_ww_widget'+(n?"_"+n:"")+s+'" id="'+_+'"><div class="eng_m_ww_widget" id="eng_m_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();var a=this.get_default_css("MOBILE_VERTICAL",_);o+="<"+this.title_elm_type+' class="eng_m_ww_title" id="eng_m_ww_title_'+this.random_id+'"><span class="eng_m_ww_ttl_span1">'+t.widget.headerText+'</span><span class="eng_m_ww_ttl_span2"></span></'+this.title_elm_type+">"+('<div class="eng_m_asw" id="eng_m_asw_'+this.random_id+'">');for(var r=t.recs,d="",l=0;l<i;l++){var h=null;if(this.is_super_native){if(!r[l].sNAD)continue;try{h=JSON.parse(r[l].sNAD),r[l].sNPData=h}catch(t){console.log("ERROR"),console.log(t);continue}}var g=r[l].postId,p=r[l].recTypeDB,c=this.get_display_name(r[l]),u=this.get_link_name(r[l]);this.visible_posts_and_types.push({pi:g,pt:p});var m=this.is_video_post(r[l])?" eng_m_widget_vsw":"",w='<div id="eng_m_sw_'+l+"_"+this.widget_id+'" class="eng_m_widget_sw'+m+'">',v=this.get_rec_type(r[l]),f=this.get_thumb(t,r[l].thumbnail_path,r[l].category_id,l+1),E=f?"":" eng_m_no_img",y="";(f||this.is_default_images)&&(y='<div id="eng_m_img_w_'+l+"_"+this.widget_id+'" class="eng_m_widget_img_w"><img id="eng_m_img_'+l+"_"+this.widget_id+'" class="eng_m_widget_img" src="'+f+'" data-pin-no-hover="true" /></div>');var A='<a id="eng_m_href_'+l+"_"+this.widget_id+'" class="eng_m_widget_href '+v+E+'" ',b=this.is_video_widget?this.shorten(r[l].title,50):this.get_title(r[l]),G=this.get_description(r[l]),x=this.get_abstract(r[l]),N=this.get_meta_tag_obj(r[l]),I="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(b)||(I='style="direction:ltr;text-align:left;"');var j='<div id="eng_m_in_'+l+"_"+this.widget_id+'" class="eng_m_widget_in" '+I+">",D='<span id="eng_m_is_'+l+"_"+this.widget_id+'" class="eng_m_widget_is">',Y=this.is_description_span||this.is_super_native&&G?'<span id="eng_m_isd_'+l+"_"+this.widget_id+'" class="eng_m_widget_isd">'+G+"</span>":"",T=x?'<h2 id="eng_m_isabs_'+l+"_"+this.widget_id+'" class="eng_m_widget_isabs">'+x+"</h2>":"",O=this.is_meta_tags_span&&N.label?'<span id="eng_m_mtg_'+l+"_"+this.widget_id+'" class="eng_m_widget_mtg mtg_m_'+N.id+'">'+N.label+"</span>":"",R=c?'<span id="eng_m_dn_'+l+"_"+this.widget_id+'" class="eng_m_widget_dn">':"",k=u?'<span id="eng_m_lt_'+l+"_"+this.widget_id+'" class="eng_m_widget_lt">':"",L=this.get_ad_brand(r[l]);d+=this.get_impression_pixel_imgs_and_populate_other_pixel_types(t.recs[l].impressionUrls),w+=(A+=this.get_click_defs(r[l],t.srcWebsiteId))+y+j+(D+=b+"</span>")+T+O+Y+(R+=c?c+"</span>":"")+(k+=u?u+"</span>":"")+L,o+=w+="</div></a></div>",o+=this.add_row_if_required(l+1,this.num_of_slides_a_row,i)}var S=this.get_widget_branding();o+='</div><div id="eng_m_brnd_'+this.widget_id+'" class="eng_m_branding">'+S+"</div></div>",o+=d+"</div>";var C=this.get_add_data("css")||"";widgetCss="<style>"+a+C+"</style>",e.html(widgetCss+o)},ENGAGEYA.prototype.build_horizontal_layout=function(){var t=this.data_json;this.calc_slides_dims();var i=t.widget.displayRows,e=this.get_total_slides(i,t.recs.length);this.total_slides=e;var _=this.get_recs_holder_elm(),s="eng_"+(this.is_mobile_conditions_satisfied()?"m_":"")+"top_ww_widget_"+this.random_id,n='<div class="eng_top_ww_widget'+this.get_tablet_cls()+'" id="'+s+'"><div class="eng_ww_widget" id="eng_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();var o=this.get_default_css("DESKTOP_VIDEO",s),a=this.get_default_css("DESKTOP_NON_VIDEO",s),r=this.get_default_css("DESKTOP",s);r+=this.is_video_widget?o:a,n+="<"+this.title_elm_type+' class="eng_ww_title" id="eng_ww_title_'+this.random_id+'"><span class="eng_ww_ttl_span1">'+t.widget.headerText+'</span><span class="eng_ww_ttl_span2"></span></'+this.title_elm_type+">"+(this.is_video_widget?'<div class="eng_ww_close" id="eng_ww_close_'+this.random_id+'"><span>&times</span></div>':"")+('<div class="eng_asw" id="eng_asw_'+this.random_id+'">');for(var d=t.recs,l="",h=0;h<e;h++){var g=null;if(this.is_super_native){if(!d[h].sNAD)continue;try{g=JSON.parse(d[h].sNAD),d[h].sNPData=g}catch(t){console.log("ERROR"),console.log(t);continue}}var p=d[h].postId,c=d[h].recTypeDB,u=this.get_link_name(d[h]);this.visible_posts_and_types.push({pi:p,pt:c}),this.is_start_of_row(h,this.num_of_slides_a_row)&&(r+="#eng_sw_"+h+"_"+this.widget_id+"{margin-"+this.widget_direction+":0px !important;}");var m=this.is_video_post(d[h])?" eng_widget_vsw":"",w='<div id="eng_sw_'+h+"_"+this.widget_id+'" class="eng_widget_sw'+m+'">',v=this.get_rec_type(d[h]),f=this.get_thumb(t,d[h].thumbnail_path,d[h].category_id,h+1),E=f?"":" eng_no_img",y="",A=this.get_exclude_posts_box_elms(d[h]),b=this.is_show_exclude_box?'<span id="eng_user_exclude_btn'+h+"_"+this.widget_id+'" class="eng_user_exclude_btn"></span>':"";(f||this.is_default_images)&&(y='<div id="eng_img_w_'+h+"_"+this.widget_id+'" class="eng_widget_img_w"><img id="eng_img_'+h+"_"+this.widget_id+'" class="eng_widget_img" src="'+f+'" data-pin-no-hover="true" />'+b+"</div>");var G='<a id="eng_href_'+h+"_"+this.widget_id+'" class="eng_widget_href '+v+E+'" ',x=this.get_title(d[h]),N=this.get_description(d[h]),I=this.get_abstract(d[h]),j=this.get_meta_tag_obj(d[h]),D="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(x)||(D='style="direction:ltr;text-align:left;"');var Y='<div id="eng_in_'+h+"_"+this.widget_id+'" class="eng_widget_in" '+D+">",T='<span id="eng_is_'+h+"_"+this.widget_id+'" class="eng_widget_is">',O=this.is_description_span||this.is_super_native&&N?'<span id="eng_isd_'+h+"_"+this.widget_id+'" class="eng_widget_isd">'+N+"</span>":"",R=I?'<h2 id="eng_isabs_'+h+"_"+this.widget_id+'" class="eng_widget_isabs">'+I+"</h2>":"",k=this.is_meta_tags_span&&j.label?'<span id="eng_mtg_'+h+"_"+this.widget_id+'" class="eng_widget_mtg mtg_'+j.id+'">'+j.label+"</span>":"",L=this.get_display_name(d[h]),S=L?'<span id="eng_dn_'+h+"_"+this.widget_id+'" class="eng_widget_dn">':"",C=u?'<span id="eng_m_lt_'+h+"_"+this.widget_id+'" class="eng_m_widget_lt">':"",q=this.get_ad_brand(d[h]);l+=this.get_impression_pixel_imgs_and_populate_other_pixel_types(t.recs[h].impressionUrls),G+=this.get_click_defs(d[h],t.srcWebsiteId),T+=x+"</span>",S+=L?L+"</span>":"",C+=u?u+"</span>":"",this.is_super_native?w+=A+G+('<h1 id="eng_snttl_'+h+"_"+this.widget_id+'" class="eng_widget_snttl" '+D+">"+T+"</h1>")+R+y+Y+k+O+S+C+q:w+=A+G+y+Y+T+k+O+S+C,n+=w+="</div></a></div>",n+=this.add_row_if_required(h+1,this.num_of_slides_a_row,e)}var P=this.get_widget_branding();n+='</div><div id="eng_brnd_'+this.widget_id+'" class="eng_branding">'+P+"</div></div>",n+=l+"</div>";var M=this.get_add_data("css")||"";widgetCss="<style>"+r+M+"</style>",_.html(widgetCss+n)},ENGAGEYA.prototype.get_exclude_posts_box_elms=function(t){if(!this.is_show_exclude_box)return"";var i='<div class="eng_excludebox_wrapper" data-id="'+t.postId+'">'+'<div class="eng_excludebox_title">Remove</div><div class="eng_excludebox_question_main"><div class="eng_excludebox_question"><div class="eng_excludebox_question_title">Tell us why?</div>';return i+=this.get_exclude_reasons_elms(),i+="</div></div></div>"},ENGAGEYA.prototype.get_exclude_reasons_elms=function(){for(var t="",i=0;i<this.exclude_posts_reasons_arr.length;i++){var e=this.exclude_posts_reasons_arr[i];t+='<label><input type="radio" name="excludeReason" class="eng_exclude_reason" value="'+e.val+'" onchange="this.checked = true;">'+e.title+"</label>",t+=i+1<this.exclude_posts_reasons_arr.length?"<br>":""}return t},ENGAGEYA.prototype.get_default_css=function(t,i){var e="",_=this.get_add_data("vpost"),s=_&&_.pimg?_.pimg:"//"+this.default_video_post_btn;switch(t){case"DESKTOP":e="#"+i+" .eng_top_ww_widget{}#"+i+" .eng_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+i+" .eng_ww_title{text-align:"+this.widget_direction+";}#"+i+" .eng_ww_close{position:absolute;top:8px;"+this.widget_op_direction+":8px;cursor:pointer;font-size:22px;}#"+i+" .eng_asw{display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;z-index:2;}#"+i+" .eng_widget_sw{width:"+this.slide_width+"px;text-align:"+this.widget_direction+";position:relative;display:inline-block;margin-"+this.widget_direction+":"+this.slide_horz_margin+"px;z-index:2;}#"+i+" .eng_widget_in{width:100%;}#"+i+" .eng_widget_is{}#"+i+" .eng_widget_dn{font-size:10px;text-decoration:none !important;display:inline-block;width:100%;}#"+i+" .eng_widget_img{width:100%;height:auto;border-radius:inherit;margin-bottom:5px;}#"+i+" .eng_widget_href{border-radius:inherit;}#"+i+" .eng_rows_seperator{height:10px;}#"+i+" .eng_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+i+" .eng_branding a{color:#BBB;font-size:12px;font-family:arial;}#"+i+" .eng_user_exclude_btn{display:none;}#"+i+" .eng_widget_sw:hover .eng_user_exclude_btn{display:block;background:url(//widget.engageya.com/img/X4.jpg) no-repeat scroll 0 0 transparent;width:14px;height:14px;position:absolute;right:2px;top:2px;z-index:9000;}#"+i+" .eng_excludebox_question_main{background:#fff!important;font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;padding-bottom:5px!important;padding-top:5px!important;padding-right:7px!important;padding-left:12px!important;}#"+i+" .eng_excludebox_title{text-align:center;padding:8px 14px!important;font-weight:bold!important;border-bottom:1px solid #F8A649!important;font-family:Arial, Helvetica, sans-serif;font-size:12px!important;background:#F8A649!important;color:#fff!important;}#"+i+" .eng_excludebox_question_title{font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;margin-bottom:5px!important;}#"+i+" .eng_excludebox_question{font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;}#"+i+" .eng_excludebox_wrapper{z-index:1;display:none;background:#fff;position:absolute;top:15px;right:5px;height:160px;width:135px;}#"+i+" .eng_exclude_reason{vertical-align:top;}#"+i+" .eng_user_undo_btn{background:none!important;color:#000!important;font-family:Arial,Helvetica,sans-serif!important;font-size:10px!important;line-height:14px!important;font-weight:400!important;text-decoration:underline!important;position:absolute!important;right:15px!important;top:1px!important;}#"+i+" .eng_srail{position:relative;bottom:0px;left:0;right:0;opacity:0;z-index:-1;box-sizing:content-box;margin-left:auto;margin-right:auto;}#"+i+" .eng_w_srail{border-color:#ccc;box-sizing: content-box;}";break;case"DESKTOP_NON_VIDEO":e="#"+i+" .eng_ww_widget{color:#000;}#"+i+" .eng_widget_sw{vertical-align:top;margin-bottom:10px}#"+i+" .eng_widget_vsw .eng_widget_img_w::after{content:'';background-image: url("+s+");position:absolute;left:40%;top:42%;width:35px;height:26px;z-index:2;}#"+i+" .eng_widget_href{position:relative;display:block !important;visibility:visible !important;}#"+i+" .eng_widget_in{width:100%;line-height:1.4;}#"+i+" .eng_widget_dn{color:#CDCDCD;}#"+i+" .eng_ww_title{padding:0px;margin:0px 0px 5px 0px;}#"+i+" .eng_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+i+" .eng_widget_img_w{position:relative;}#"+i+" .eng_widget_img{margin-bottom:5px;display:block;}";break;case"DESKTOP_VIDEO":e="#"+i+" .eng_ww_widget{background-color:rgba(1, 1, 1, 0.9);color:#FFF;}#"+i+" .eng_widget_in{position:absolute;background-color:rgba(36,36,36,0.8);color:#FFF;font-size:12px;line-height:normal !important;bottom:0px;}#"+i+" .eng_widget_sw{height:"+this.slide_height+"px;}#"+i+" .eng_widget_dn{}#"+i+" .eng_widget_is{display:block;padding: 2px 5px 2px 5px;}#"+i+" .eng_ww_title{padding:0px 0px 5px 0px;font-size:15px;}";break;case"MOBILE_VERTICAL":e="#"+i+" .eng_m_top_ww_widget{}#"+i+" .eng_m_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+i+" .eng_m_ww_title{padding:0px 0px 5px 0px;text-align:"+this.widget_direction+";}#"+i+" .eng_m_asw{position:relative;display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;z-index:2;}#"+i+" .eng_m_widget_sw{width:100%;padding-bottom:8px;z-index:2;}#"+i+" .eng_m_widget_vsw .eng_m_widget_img_w::after{content:'';background-image: url("+s+");position:absolute;"+this.widget_direction+":37%;top:42%;width:35px;height:26px;z-index:2;}#"+i+" .eng_m_widget_in{width:57%;display:inline-block;vertical-align:top;text-align:"+this.widget_direction+";}#"+i+" .eng_m_widget_is{line-height:1.4;}#"+i+" .eng_m_widget_dn{font-size:10px;padding:5px 5px 3px 0px;color:#999999;display:block;}#"+i+" .eng_m_widget_img_w{width:40%;margin-"+this.widget_op_direction+":3%;display:inline-block;position:relative;}#"+i+" .eng_m_widget_img{width:100%;}#"+i+" .eng_m_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+i+" .eng_m_widget_href{border-radius:inherit;display:block !important;visibility:visible !important;}#"+i+" .eng_m_rows_seperator{height:8px;}#"+i+" .eng_m_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+i+" .eng_srail{position:relative;bottom:0px;left:0;right:0;opacity:0;z-index:-1;box-sizing:content-box;margin-left:auto;margin-right:auto;}#"+i+" .eng_w_srail{border-color:#ccc;box-sizing: content-box;}#"+i+" .eng_m_branding a{color:#BBB;font-size:12px;font-family:arial;}";break;case"VIDEO_ONLY":e="#"+this.widget_wrapper_elm_id+"{visibility:hidden;}#"+i+" .eng_ww_widget{margin:0;padding:0;}#"+i+" .eng_widget_sw{margin:0px;}#"+i+" .eng_widget_in{display:none;}#"+i+" .eng_ww_close{padding:0px 7px;z-index:11111;background:#000;"+this.widget_op_direction+":0px;top:initial;color:#FFF;}#"+i+" .eng_ww_title{display:none;}"}return e},ENGAGEYA.prototype.get_description=function(t){if(t){var i=t.description;if(this.is_super_native){if(!t.sNPData||!t.sNPData.desc)return;i=t.sNPData.desc}try{var e;e=this.is_mobile_conditions_satisfied()?this.max_mobile_description_chars:this.max_description_chars,i&&i.length>e&&(i=i.replace("...",""),i=this.shorten_string(i,e),i+=this.postfix_for_cutted_description)}catch(t){console.log("ERROR"),console.log(t)}return i}},ENGAGEYA.prototype.get_abstract=function(t){if(t){var i="";if(this.is_super_native){if(!t.sNPData||!t.sNPData.abs)return;i=t.sNPData.abs;try{var e;e=this.is_mobile_conditions_satisfied()?this.max_mobile_abstract_chars:this.max_abstract_chars,i&&i.length>e&&(i=i.replace("...",""),i=this.shorten_string(i,e),i+=this.postfix_for_cutted_abstract)}catch(t){console.log("ERROR"),console.log(t)}}return i}},ENGAGEYA.prototype.get_ad_brand=function(t){if(!t)return"";var i="";if(this.is_super_native){var e="";try{if(t.sNPData&&t.sNPData.adbrnd&&(e=JSON.parse(t.sNPData.adbrnd)),!e)return"";var _=!1;e.href&&(_=!0,i+='<a id="eng_href_adbrnd_'+this.widget_id+'" class="eng_href_adbrnd" href="'+e.href+'" title="'+e.ttl+'" target=_blank">'),i+='<span id="eng_span_adbrnd_'+this.widget_id+'" class="eng_span_adbrnd">'+e.ttl,e.img&&(i+='<img src="'+e.img+'"/>'),i+="</span>",_&&(i+="</a>")}catch(t){console.log("ERROR"),console.log(t)}}return i},ENGAGEYA.prototype.get_title=function(t){if(t){var i=t.title;try{var e;e=this.is_mobile_conditions_satisfied()?this.max_mobile_title_chars:this.max_title_chars,i&&i.length>e&&(i=this.shorten_string(i,e),i+=this.postfix_for_cutted_title)}catch(t){console.log("ERROR"),console.log(t)}return i}},ENGAGEYA.prototype.shorten_string=function(t,i){var e=(t=(t=t.substring(0,i)).trim()).lastIndexOf(" "),_=(t=t.substring(0,e)).charAt(t.length-1);return","!=_&&"."!=_&&"-"!=_&&"|"!=_||(t=t.substring(0,t.length-1).trim()),t},ENGAGEYA.prototype.get_meta_tag_obj=function(t){if(t){var i={label:"",id:""};try{t.metatagLabels&&t.metatags&&(i.label=t.metatagLabels[0]||"",i.id=t.metatags.split(",")[0]||"",i.label=i.label.replace(/\^/g," "))}catch(t){console.log("ERROR"),console.log(t)}return i}},ENGAGEYA.prototype.get_click_defs=function(t,i){var e=this.get_href_target(t.partner_id,i),_=this.get_cancle_click_bubble(),s='onclick="'+_+'"',n=!!t.ajx,o="",a=t.clickUrl,r=this.array_to_csv(this.ad_click_pixels);this.ad_click_pixels=[];var d=this.get_rec_type(t)==this.rec_types[1]?"":'rel="nofollow" ';if(n)window.ajx_sprk_click=function(t){},o+=e+" "+d+'href="'+t.url+'" '+s+' title="'+t.title+'" onmousedown="_eng_do_async_click(\''+a+"');_eng_fire_async_pixels('"+r+"');"+_+'return true;">';else{if(this.is_in_iframe()){var l=this.get_page_url();l&&(a=a+"&cr="+(l=encodeURIComponent(decodeURIComponent(l))))}o+=e+" "+d+'href="'+t.url+'" '+s+' title="'+t.title+'" onmousedown="_eng_fire_async_pixels(\''+r+"');this.href='"+a+"';"+_+'return true;">'}return o},ENGAGEYA.prototype.array_to_csv=function(t){for(var i="",e=0;e<t.length;e++)i+=t[e],e!=t.length-1&&(i+=",");return i},ENGAGEYA.prototype.get_rec_type=function(t){return"eng_"+t.recType.split("_")[1].toLowerCase()},ENGAGEYA.prototype.is_video_post=function(t){var i=!1,e=this.get_add_data("vpost");return e&&e.drgx&&(i=null!=t.url.match(e.drgx)),i},ENGAGEYA.prototype.get_impression_pixel_imgs_and_populate_other_pixel_types=function(t){var i="";if(t&&null!=t&&t.length>0)for(var e=0;e<t.length;e++)for(var _=t[e].split("^"),s=0;s<_.length;s++){var n=_[s];if(-1!=n.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_CLK)){o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_CLK,"");this.ad_click_pixels.push(o)}else if(-1!=n.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_RIMP)){var o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_RIMP,"");this.ad_real_impression_pixels.push(o)}else i+='<img src="'+(o=n.replace(this.pixels_consts.ENG_PIXEL_TRACK_IMP,""))+'" style="display:none;" width="1px" height="1px" />'}return i},ENGAGEYA.prototype.get_display_name=function(t){var i="",e=[2,3,4,8,18,19,20,21,30,31,32],_=1*t.recTypeDB;return this.in_array(_,e)&&(i=this.shorten(t.displayName,20)),i},ENGAGEYA.prototype.get_link_name=function(t){var i="";return this.is_super_native&&t.sNPData&&t.sNPData.lnkTtl&&(i=t.sNPData.lnkTtl),i},ENGAGEYA.prototype.populate_widget_directions=function(){this.widget_txt_direction=this.widget_txt_direction||this.get_recs_holder_elm().css("direction");var t="rtl"==this.widget_txt_direction;this.widget_direction=t?"right":"left",this.widget_op_direction=t?"left":"right"},ENGAGEYA.prototype.get_cancle_click_bubble=function(){return this.is_cancel_click_bubble?"event&&event.cancelBubble&&(event.cancelBubble=true);event&&event.stopPropagation&&(event.stopPropagation());":""},ENGAGEYA.prototype.get_recs_holder_elm=function(){return this.jq("#eng_recs_holder_"+this.random_id)},ENGAGEYA.prototype.align_widget_elements=function(){this.align_widget_title()},ENGAGEYA.prototype.get_widget_branding=function(){var t="",i=null,e={img:"",img2:""};this.get_add_data("jsvls");if(this.is_default_brand){var _="//"+this.default_imgs_url;i=this.get_add_data("brnd")||{href:"//www.engageya.com",name:"",ttl:"Engageya",img:{src:_+"eng_logo.png",width:41,height:12},imghvr:_+"eng_logo_c.png",href2:"",name2:"",ttl2:"",img2:"",img2hvr:""},this.set_add_data("brnd",i)}else i=this.get_add_data("brnd")||{href:"",name:"",ttl:"",img:"",imghvr:"",adds:"",href2:"",name2:"",ttl2:"",img2:"",adds2:"",img2hvr:""};if(i.adds||(i.adds=""),i.img){s=i.img;e.img='<img id="eng_brnd_img_'+this.widget_id+'" class="eng_brnd_img" src="'+s.src+'" width="'+s.width+'px" height="'+s.height+'px"/>'}if(i.img2){var s=i.img2;e.img2='<img id="eng_brnd_img2_'+this.widget_id+'" class="eng_brnd_img2" src="'+s.src+'" width="'+s.width+'px" height="'+s.height+'px"/>'}return(i.name||i.img)&&(t='<a href="'+i.href+'" '+i.adds+' target="_blank" title="'+i.ttl+'">'+i.name+e.img+"</a>"),(i.name2||i.img2)&&(i.href2=i.href2||"",i.ttl2=i.ttl2||"",i.name2=i.name2||"",t+='<a href="'+i.href2+'" '+i.adds2+' target="_blank" title="'+i.ttl2+'">'+i.name2+e.img2+"</a>"),t},ENGAGEYA.prototype.is_mobile=function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}},ENGAGEYA.prototype.get_tablet_cls=function(){var t="";return this.is_tablet_conditions_satisfied()&&(t=" eng_tablet"),t},ENGAGEYA.prototype.is_tablet_conditions_satisfied=function(){return!!(this.is_mobile()&&!this.is_mobile_conditions_satisfied()&&this.max_width_for_tablet_cls&&this.max_width_for_tablet_cls>=this.width)},ENGAGEYA.prototype.get_mobile_device_OS=function(){if(this.is_mobile())return navigator.userAgent.match(/Android/i)?"android":navigator.userAgent.match(/iPhone|iPad|iPod/i)?"ios":"other"},ENGAGEYA.prototype.align_widget_title=function(){},ENGAGEYA.prototype.get_thumb=function(t,i,e,_){var s,n=this.widget_img_size,o=4,a=3;if(this.vertical_widget_img_size&&(n=this.vertical_widget_img_size,o=17),this.image_size_for_rec_num)if(o=17,this.image_size_for_rec_num.phone&&this.is_mobile_conditions_satisfied())for(r=0;r<this.image_size_for_rec_num.phone.length;r++)this.image_size_for_rec_num.phone[r][0]==_&&(n=this.image_size_for_rec_num.phone[r][1]);else if(this.image_size_for_rec_num.tablet&&this.is_tablet_conditions_satisfied())for(r=0;r<this.image_size_for_rec_num.tablet.length;r++)this.image_size_for_rec_num.tablet[r][0]==_&&(n=this.image_size_for_rec_num.tablet[r][1]);else if(this.image_size_for_rec_num.desktop)for(r=0;r<this.image_size_for_rec_num.desktop.length;r++)this.image_size_for_rec_num.desktop[r][0]==_&&(n=this.image_size_for_rec_num.desktop[r][1]);if(i)for(var r=1;r<=o;r++)if(r!=n&&-1!=(s=i.lastIndexOf("_"+r+"."))){r>=10&&(a=4),i=i.substr(0,s)+"_"+n+"."+i.substr(s+a);break}return i},ENGAGEYA.prototype.shorten=function(t,i){if(!t)return"";var e=t.length,_=t.indexOf(" ",i);return-1==_?e<=i?t:t.substring(0,i)+"...":(sS=t.substring(0,_),sS.length<e&&(sS+="..."),sS)},ENGAGEYA.prototype.click=function(t,i,e){return t.href=i,!0},ENGAGEYA.prototype.get_href_target=function(t,i){var e="";return t!=i||this.is_links_open_new_window?e='target="_blank"':this.is_in_iframe()&&(e='target="_parent"'),e},ENGAGEYA.prototype.is_in_iframe=function(){return window.self!==window.top},ENGAGEYA.prototype.is_start_of_row=function(t,i){return t%i==0},ENGAGEYA.prototype.add_row_if_required=function(t,i,e){return t%i==0&&t!=e?'<div style="clear: both" class="eng_rows_seperator"></div>':""},ENGAGEYA.prototype.floor_figure=function(t,i){i||(i=2);var e=Math.pow(10,i);return(parseInt(t*e)/e).toFixed(i)},ENGAGEYA.prototype.calc_slides_dims=function(){try{var t=this.width-this.widget_lpadding-this.widget_rpadding-this.widget_rmargin-this.widget_lmargin-this.slides_wrapper_lpadding-this.slides_wrapper_rpadding-this.slides_wrapper_lmargin-this.slides_wrapper_rmargin,i=Math.floor(t/this.slide_width),e=Math.floor((t-(i-1)*this.slide_horz_margin)/this.slide_width);this.get_add_data("jsvls");this.is_mobile_conditions_satisfied()?this.num_of_slides_a_row=this.num_of_mobile_slides_a_row?this.num_of_mobile_slides_a_row:e:this.num_of_slides_a_row=this.num_of_slides_a_row?this.num_of_slides_a_row:e;var _=this.get_add_data("jcss");if(0==this.num_of_slides_a_row&&t>99&&(this.slide_width=t,this.num_of_slides_a_row=1),!this.is_video_widget&&this.num_of_slides_a_row>1&&(!_||!_.sw)){var s=(t-this.num_of_slides_a_row*this.slide_width-this.slide_horz_margin*(this.num_of_slides_a_row-1))/this.num_of_slides_a_row+this.slide_width;this.slide_width=this.floor_figure(s,2)}}catch(t){this.num_of_slides_a_row=1,console.log("ERROR"),console.log(t)}},ENGAGEYA.prototype.populate_required_fields=function(){this.calculate_widget_wrapper_dims()},ENGAGEYA.prototype.calculate_widget_wrapper_dims=function(){var t=1==this.is_video_widget?document.getElementById(this.plr_elm_id):this.widget_wrapper_elm,i=t=t||this.widget_wrapper_elm;this.width=this.width?this.width:this.jq(t).width();var e=this.get_exact_width(t);e&&(this.width=e),this.height=this.height?this.height:this.jq(t).height();try{for(;t&&(0===this.height||this.height<100)&&this.jq(t).parent();)t&&(t=this.jq(t).parent().get(0),this.height=this.jq(t).height());for(t=i;t&&(0===this.width||this.width<100)&&this.jq(t).parent();)(t=this.jq(t).parent().get(0))&&(this.width=this.jq(t).width(),e=this.get_exact_width(t),this.width=e||this.width)}catch(t){console.log("ERROR"),console.log(t)}},ENGAGEYA.prototype.get_exact_width=function(t){var i=this.jq(t)[0].getBoundingClientRect().width;return i&&Math.abs(i-this.width)>0&&Math.abs(i-this.width)<1?i:null},ENGAGEYA.prototype.create_placement=function(){this.populate_required_fields();var t=document.createElement("div");t.id="eng_recs_holder_"+this.random_id,t.className="eng_recs_holder",this.widget_wrapper_elm.appendChild(t);var i=document.createElement("style");i.type="text/css";var e=this.is_video_widget?"none":"block",_="#eng_recs_holder_"+this.random_id+" .eng_widget_sw:hover{zoom:1;filter:alpha(opacity=100);opacity:1;-webkit-filter: brightness(120%);filter: brightness(1.2);}#eng_recs_holder_"+this.random_id+" .eng_widget_sw{filter:alpha(opacity=90);opacity:0.9;}#eng_recs_holder_"+this.random_id+"{height:"+(this.height-40)+"px;-webkit-transform-style: preserve-3d;-moz-transform-style: preserve-3d;transform-style: preserve-3d;}#eng_top_ww_widget_"+this.random_id+"{position: relative;top: 50%;transform: translateY(-50%);width: 100%;}",s="";this.is_video_widget&&(this.jq(this.widget_wrapper_elm).parent().css("position","relative"),s+=_,s+=".eng_recs_holder{width: 100%;top:0px;position: absolute;text-align:center;z-index:999999;background-color: rgba(1, 1, 1, 0.6);}#eng_recs_holder_"+this.random_id+"{display:"+e+";}.eng_recs_holder a{text-decoration:none;}"),i.styleSheet?i.styleSheet.cssText=s:i.appendChild(document.createTextNode(s)),document.getElementsByTagName("head")[0].appendChild(i)},ENGAGEYA.prototype.get_page_ttl=function(){var t="",i=document.getElementsByTagName("title");if(i&&i.length>0)try{t=(t=i[0].innerText||i[0].textContent).substring(0,100).substring(0,t.lastIndexOf(" ")),t=encodeURIComponent(t)}catch(t){}return t},ENGAGEYA.prototype.get_meta_content=function(t,i){for(var e=document.getElementsByTagName("meta"),_="",s=0;s<e.length;s++)if(e[s].getAttribute("property")==t||e[s].getAttribute("name")==t){try{_=(_=e[s].getAttribute(i)).substring(0,200).substring(0,_.lastIndexOf(" ")),_=encodeURIComponent(_)}catch(t){}break}return _},ENGAGEYA.prototype.get_lang=function(){return window.navigator.userLanguage||window.navigator.language},ENGAGEYA.prototype.append_script_to_head=function(t,i){var e=document.createElement("script");e.type="text/javascript",e.id=i,e.src=t,e.charset="UTF-8",e.async=!0;var _=document.getElementsByTagName("head")[0];_.parentNode.insertBefore(e,_)},ENGAGEYA.prototype.append_link_to_head=function(t,i,e,_,s){var n=document.createElement("link");n.type=e,n.id=i,n.href=t,n.rel=_,n.async=s;var o=document.getElementsByTagName("head")[0];o.parentNode.insertBefore(n,o)},ENGAGEYA.prototype.getQS=function(t){var i=t.replace(/^[^\?]+\??/,""),e=new Object;if(!i)return e;for(var _=i.split(/[;&]/),s=0;s<_.length;s++){for(var n=_[s].replace(/(pid=.*)=.*/,"$1"),o=_[s].length-n.length,a=0;a<o;a++)n+="%3D";var r=n.split(/=(.*)/);if(r&&!(r.length<2)){var d=unescape(r[0]),l=r[1];l=l.replace(/\+/g," "),e[d]=l}}return e},ENGAGEYA.prototype.inj_init_binding=function(t){function i(){if(!called)try{document.documentElement.doScroll("left"),t.doc_ready(t)}catch(t){setTimeout(i,10)}}if(document.addEventListener)document.addEventListener("DOMContentLoaded",t.doc_ready(t),!1);else if(document.attachEvent){try{var e=null!=window.frameElement}catch(t){}document.documentElement.doScroll&&!e&&i(),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t.doc_ready(t)})}},ENGAGEYA.prototype.in_array=function(t,i){for(var e in i)if(i[e]==t)return!0;return!1};var _eng_do_async_click=function(t){var i=document.createElement("script");i.type="text/javascript",i.src=t,document.getElementsByTagName("head")[0].appendChild(i)},_eng_fire_async_pixels=function(t){if(t)for(var i=t.split(","),e=0;e<i.length;e++){var _=i[e],s=document.createElement("img");s.src=_;try{document.getElementsByTagName("head")[0].appendChild(s)}catch(t){console.log("ERROR - click pixel:"),console.log(t)}}};ENGAGEYA.prototype.fire_real_impression_pixels=function(){for(var t=0;t<this.ad_real_impression_pixels.length;t++){var i=document.createElement("img");i.src=this.ad_real_impression_pixels[t];try{document.getElementsByTagName("head")[0].appendChild(i)}catch(t){console.log("ERROR - pixel:"),console.log(t)}}this.ad_real_impression_pixels=[]},ENGAGEYA_VIDEO.prototype.attach_widget_events=function(){try{var t=this;this.load_real_imps_events(),this.load_video_view_events(),this.widget_imgs_events(),this.widget_clicks_events(),this.jq("#eng_ww_close_"+this.random_id).click(function(){t.get_videojs_obj().dispose(),t.close_video()})}catch(t){console.log("ERROR - events:"),console.log(t)}},ENGAGEYA.prototype.posts_exclusion_box_events=function(){var t=this;this.is_show_exclude_box&&(this.jq(this.widget_wrapper_elm).find(".eng_exclude_reason").click(function(i){var e=t.jq(this).parents(".eng_widget_sw");e.find(".eng_excludebox_question,.eng_user_exclude_btn").css("display","none");var _=e.find(".eng_excludebox_wrapper");_.css("height","100px"),e.find(".eng_excludebox_question_main").html(t.exclude_posts_box_default_thank_you),_.delay(2500).fadeOut(500,function(){});var s=_.attr("data-id"),n=t.jq(this).val();t.fire_exclude_event(s,n)}),this.jq(this.widget_wrapper_elm).find(".eng_user_exclude_btn").click(function(i){i.preventDefault();var e=t.jq(this).parents(".eng_widget_sw");t.jq(this).hasClass("eng_user_undo_btn")?(t.jq(this).toggleClass("eng_user_undo_btn"),e.find(".eng_excludebox_wrapper").css("display","none"),e.find(".eng_widget_in,.eng_widget_img").css("opacity","1"),t.jq(this).text("")):(t.jq(this).toggleClass("eng_user_undo_btn"),e.find(".eng_excludebox_wrapper").css("display","block"),e.find(".eng_widget_in,.eng_widget_img").css("opacity","0.3"),t.jq(this).text("Undo"))}))},ENGAGEYA.prototype.fire_exclude_event=function(t,i){if(t&&i){var e="//"+this.exclude_post_url+"?pid="+t+"&rsnid="+i;this.append_script_to_head(e)}},ENGAGEYA_VIDEO.prototype.visibility_load_video_js_event=function(t){(0==this.load_on_view_percents||this.is_elm_visible_conditions(t,this.load_on_view_percents,"above"))&&this.load_videojs()},ENGAGEYA_VIDEO.prototype.visibility_play_video_event=function(t){var i=0==this.play_video_on_view_percents.top||this.is_elm_visible_conditions(t,this.play_video_on_view_percents.top,"above"),e=0==this.play_video_on_view_percents.bottom||this.is_elm_visible_conditions(t,this.play_video_on_view_percents.bottom,"below");if(i&&e&&!this.is_video_should_be_paused){if(this.handle_video_widget_visibility(),this.is_play_command_sent)return;this.is_play_command_sent=!0;var _=this;window.setTimeout(function(){_.play_video(_)},150)}},ENGAGEYA_VIDEO.prototype.handle_video_widget_visibility=function(){this.is_video_was_on_view||(this.is_video_was_on_view=!0,this.show_video_widget())},ENGAGEYA_VIDEO.prototype.show_video_widget=function(){this.jq(this.widget_wrapper_elm).css({visibility:"visible",opacity:0}).animate({opacity:1},500)},ENGAGEYA_VIDEO.prototype.visibility_pause_video_event=function(t){var i=0!=this.pause_video_on_not_view_percents.top&&!this.is_elm_visible_conditions(t,this.pause_video_on_not_view_percents.top,"above"),e=0!=this.pause_video_on_not_view_percents.bottom&&!this.is_elm_visible_conditions(t,this.pause_video_on_not_view_percents.bottom,"below");!i&&!e&&this.is_window_active||this.is_play_command_sent?this.is_video_should_be_paused=!1:(this.is_video_should_be_paused=!0,this.pause_video())},ENGAGEYA_VIDEO.prototype.play_video=function(t){this.logger(this.log_types.INFO,"PLAYING VIDEO");try{this.ads_manager.resume()}catch(i){t.is_play_command_sent=!1}t.is_play_command_sent=!1},ENGAGEYA_VIDEO.prototype.pause_video=function(){this.logger(this.log_types.INFO,"PAUSING VIDEO");try{this.ads_manager.pause()}catch(t){}},ENGAGEYA_VIDEO.prototype.on_visibility_change=function(t){return function(){var i=t.widget_wrapper_elm;t.visibility_load_video_js_event(i),t.is_load_videojs_called&&t.populate_video_tag(),t.is_video_tag_populated&&t.ads_ready&&(t.visibility_pause_video_event(i),t.visibility_play_video_event(i))}},ENGAGEYA_VIDEO.prototype.set_window_active=function(t){return function(){t.is_run_only_on_window_active&&(t.is_window_active=!0),t.logger(t.log_types.INFO,"WINDOW ACTIVE")}},ENGAGEYA_VIDEO.prototype.set_window_blur=function(t){return function(){t.is_run_only_on_window_active&&(t.is_window_active=!1),t.logger(t.log_types.INFO,"WINDOW NON ACTIVE")}},ENGAGEYA_VIDEO.prototype.load_video_view_events=function(){var t=this.on_visibility_change(this),i=this.set_window_blur(this),e=this.set_window_active(this);window.addEventListener?(addEventListener("DOMContentLoaded",t,!1),addEventListener("load",t,!1),addEventListener("scroll",t,!1),addEventListener("resize",t,!1),addEventListener("focus",function(){e(),t()},!1),addEventListener("blur",function(){i(),t()},!1),addEventListener("touchstart",function(){t()},!1),addEventListener("click",function(){t()},!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",t),attachEvent("onload",t),attachEvent("onscroll",t),attachEvent("onresize",t),attachEvent("onfocus",function(){e(),t()}),attachEvent("onblur",function(){i(),t()})),t()},ENGAGEYA_VIDEO.prototype.get_video_js_scripts=function(t){var i=this;if(this.videojs_js_files[t]){console.log("LOADING JS FILE: "+this.videojs_js_files[t]);var e=-1==this.videojs_js_files[t].indexOf("//")?this.videojs_path+this.videojs_js_files[t]:this.videojs_js_files[t];this.get_script(e,function(e,_,s){t++,i.get_video_js_scripts(t)})}else this.is_video_js_fully_loaded=!0},ENGAGEYA_VIDEO.prototype.load_videojs=function(){if(!this.is_load_videojs_called){for(var t=0;t<this.videojs_css_files.length;t++)this.append_link_to_head(this.videojs_path+this.videojs_css_files[t],"","text/css","stylesheet",!0);this.get_video_js_scripts(0),this.is_load_videojs_called=!0,console.log("VIDEO JS STARTED LOADING")}},ENGAGEYA_VIDEO.prototype.is_elm_visible_conditions=function(t,i,e){i=i||0,e=e||"visible";var _=t.getBoundingClientRect(),s=Math.ceil(_.height)*i/100,n=window.innerHeight||document.documentElement.clientHeight,o=_.top<n-s&&_.top+_.height>=s,a=_.bottom>s;return"above"===e?o:"below"===e?a:!o&&!a},ENGAGEYA_VIDEO.prototype.get_total_slides=function(){return 1},ENGAGEYA_VIDEO.prototype.get_video_additional_data=function(t){var i={};if(!t.vMAD)return i;try{i=JSON.parse(t.vMAD.replace(/\[rid\]/g,this.random_id))}catch(t){console.log("ERROR:"),console.log(t)}return i},ENGAGEYA_VIDEO.prototype.build_layout=function(){this.build_video_layout()},ENGAGEYA_VIDEO.prototype.build_video_layout=function(){var t=this.data_json;this.calc_slides_dims();var i=t.widget.displayRows,e=this.get_total_slides(i,t.recs.length),_=this.get_recs_holder_elm(),s="eng_"+(this.is_mobile_conditions_satisfied()?"m_":"")+"top_ww_widget_"+this.random_id,n='<div class="eng_top_ww_widget'+this.get_tablet_cls()+'" id="'+s+'"><div class="eng_ww_widget" id="eng_ww_widget_'+this.widget_id+'">';this.populate_widget_directions();this.get_default_css("DESKTOP_VIDEO",s);var o=this.get_default_css("DESKTOP_NON_VIDEO",s),a=this.get_default_css("VIDEO_ONLY",s),r=this.get_default_css("DESKTOP",s);r+=o+a,n+="<"+this.title_elm_type+' class="eng_ww_title" id="eng_ww_title_'+this.random_id+'"><span class="eng_ww_ttl_span1">'+t.widget.headerText+'</span><span class="eng_ww_ttl_span2"></span></'+this.title_elm_type+">"+('<div class="eng_ww_close" id="eng_ww_close_'+this.random_id+'"><span>&times</span></div>')+('<div class="eng_asw" id="eng_asw_'+this.random_id+'">');for(var d=t.recs,l="",h=0;h<e;h++)if(d[h].vMUrl){this.populate_video_additional_data(d[h]);var g=d[h].postId,p=d[h].recTypeDB;this.visible_posts_and_types.push({pi:g,pt:p}),this.is_start_of_row(h,this.num_of_slides_a_row)&&(r+="#eng_sw_"+h+"_"+this.widget_id+"{margin-"+this.widget_direction+":0px !important;}");var c=this.is_video_post(d[h])?" eng_widget_vsw":"",u='<div id="eng_sw_'+h+"_"+this.widget_id+'" class="eng_widget_sw'+c+'">',m=this.get_rec_type(d[h]),w=this.get_thumb(t,d[h].thumbnail_path,d[h].category_id,h+1)?"":" eng_no_img",v='<div id="eng_video_w_'+this.random_id+'" class="eng_widget_video_w"></div>',f='<a id="eng_href_'+h+"_"+this.widget_id+'" class="eng_widget_href '+m+w+'" ',E=this.get_title(d[h]),y=this.get_description(d[h]),A=this.get_meta_tag_obj(d[h]),b="";"rtl"!=this.widget_txt_direction||this.isShouldBeRTL(E)||(b='style="direction:ltr;text-align:left;"');var G='<div id="eng_in_'+h+"_"+this.widget_id+'" class="eng_widget_in" '+b+">",x='<span id="eng_is_'+h+"_"+this.widget_id+'" class="eng_widget_is">',N=this.is_description_span?'<span id="eng_isd_'+h+"_"+this.widget_id+'" class="eng_widget_isd">'+y+"</span>":"",I=this.is_meta_tags_span&&A.label?'<span id="eng_mtg_'+h+"_"+this.widget_id+'" class="eng_widget_mtg mtg_'+A.id+'">'+A.label+"</span>":"",j=this.get_display_name(d[h]),D=j?'<span id="eng_dn_'+h+"_"+this.widget_id+'" class="eng_widget_dn">':"";l+=this.get_impression_pixel_imgs_and_populate_other_pixel_types(t.recs[h].impressionUrls),f+=this.get_click_defs(d[h],t.srcWebsiteId),this.is_add_href||(f=""),u+=f+v+G+(x+=E+"</span>")+I+N+(D+=j?j+"</span>":""),n+=u+="</div></a></div>",n+=this.add_row_if_required(h+1,this.num_of_slides_a_row,e)}var Y=this.get_widget_branding();n+='</div><div id="eng_brnd_'+this.widget_id+'" class="eng_branding">'+Y+"</div></div>",n+=l+"</div>";var T=this.get_add_data("css")||"";widgetCss="<style>"+r+T+"</style>",_.html(widgetCss+n)},ENGAGEYA_VIDEO.prototype.populate_video_additional_data=function(t){var i=this.get_video_additional_data(t);this.auto_play=0==i.autoply?"":this.auto_play,this.is_muted=void 0===i.ismute&&this.is_muted,this.load_on_view_percents=i.lovp||this.load_on_view_percents,this.play_video_on_view_percents=i.plyvovp||this.play_video_on_view_percents,this.pause_video_on_not_view_percents=i.psvonvp||this.pause_video_on_not_view_percents,this.is_display_controls=i.idc||this.is_display_controls,this.video_sources=i.vsrcs||this.video_sources,this.is_close_player_when_ads_completed=i.iscpwac||this.is_close_player_when_ads_completed,this.video_width=i.vw?i.vw:Math.floor(this.width),this.video_view_ratio=i.vvr?i.vvr:this.video_view_ratio,this.video_height=this.video_view_ratio?Math.floor(this.width/this.video_view_ratio):null,this.skip_offest=i.skpofst?i.skpofst:this.skip_offest,this.fire_click_events=i.fclkevts?i.fclkevts:this.fire_click_events,this.is_close_video_on_ad_timeout=i.icvoatout||this.is_close_video_on_ad_timeout,this.video_volume=i.vidvol||this.video_volume,this.video_load_ad_timeout=i.vladtout||this.video_load_ad_timeout,this.is_run_only_on_window_active=i.isroowa||this.is_run_only_on_window_active,this.preload=i.preld||this.preload,this.is_unmute_on_mouse_over=i.iuomo||this.is_unmute_on_mouse_over},ENGAGEYA_VIDEO.prototype.get_videojs_obj=function(){return videojs("#eng_video_"+this.random_id)},ENGAGEYA_VIDEO.prototype.get_videojs_wrapper_obj=function(){return this.jq("#eng_video_w_"+this.random_id)},ENGAGEYA_VIDEO.prototype.populate_video_tag=function(){try{if(!this.is_video_js_fully_loaded||1==this.is_video_tag_populated)return;var t=this.get_video_rec(),i="",e=this.get_videojs_wrapper_obj();if(!e[0])return;i='<video id="eng_video_'+this.random_id+'" playsinline class="eng_video_'+this.widget_id+' video-js vjs-default-skin vjs-big-play-centered"></video>',e.html(i);var _=this.get_videojs_obj();_.autoplay(this.auto_play),_.preload(this.preload),_.width(this.video_width),this.video_view_ratio&&this.video_height?_.height(this.video_height):this.video_height=_.height(),_.src(this.video_sources),_.controls(this.is_display_controls),_.muted(this.is_muted),_.volume(this.video_volume),this.video_types[t.vMType]==this.video_types_const.VAST?(_.ima({id:"eng_video_"+this.random_id,adTagUrl:this.populate_place_holders(t.vMUrl)}),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),_.ima.initializeAdDisplayContainer(),_.ima.adsRenderingSettings.loadVideoTimeout=this.video_load_ad_timeout,_.ima.requestAds(),this.attach_ad_error_event(),this.attach_ads_ready_event(),this.attach_mouse_move_events()):this.video_types[t.vMType],this.is_video_tag_populated=!0}catch(t){this.logger(this.log_types.ERROR,t)}},ENGAGEYA_VIDEO.prototype.populate_place_holders=function(t){return-1!=t.indexOf(this.place_holders.WIDTH)&&(t=t.replace(this.place_holders.WIDTH,Math.floor(this.video_width))),-1!=t.indexOf(this.place_holders.HEIGHT)&&(t=t.replace(this.place_holders.HEIGHT,Math.floor(this.video_height))),-1!=t.indexOf(this.place_holders.PAGE_URL)&&(t=t.replace(this.place_holders.PAGE_URL,this.get_page_url())),-1!=t.indexOf(this.place_holders.DNT)&&(t=t.replace(this.place_holders.DNT,document.location.hostname)),-1!=t.indexOf(this.place_holders.CACHE_BUSTER)&&(t=t.replace(this.place_holders.CACHE_BUSTER,this.generate_random_number())),-1!=t.indexOf(this.place_holders.PAGE_TITLE)&&(t=t.replace(this.place_holders.PAGE_TITLE,this.get_page_ttl())),t},ENGAGEYA_VIDEO.prototype.get_video_rec=function(){return this.data_json.recs[0]},ENGAGEYA_VIDEO.prototype.attach_mouse_move_events=function(){this.attach_mouse_over_event(),this.attach_mouse_out_event()},ENGAGEYA_VIDEO.prototype.attach_mouse_over_event=function(){var t=this;this.jq(this.widget_wrapper_elm).mouseover(function(){t.is_unmute_on_mouse_over&&t.is_muted&&(t.get_videojs_obj().muted(!1),t.logger(t.log_types.INFO,"VIDEO UNMUTED"))})},ENGAGEYA_VIDEO.prototype.attach_mouse_out_event=function(){var t=this;this.jq(this.widget_wrapper_elm).mouseout(function(){t.is_muted&&t.is_unmute_on_mouse_over&&(t.get_videojs_obj().muted(!0),t.logger(t.log_types.INFO,"VIDEO MUTED"))})},ENGAGEYA_VIDEO.prototype.attach_ads_events=function(){this.attach_ad_timeout_event(),this.attach_ad_clicked_event(),this.attach_ad_ended_event(),this.attach_ad_started_event()},ENGAGEYA_VIDEO.prototype.attach_after_ad_started_events=function(){this.attach_ad_firstQuartile_event(),this.attach_ad_midpoint_event(),this.attach_ad_thirdQuartile_event(),this.attach_ad_complete_event()},ENGAGEYA_VIDEO.prototype.attach_ad_complete_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_COMPLETE),t.logger(t.log_types.INFO,"AD COMPLETED")})},ENGAGEYA_VIDEO.prototype.attach_ad_thirdQuartile_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_THIRD_QUARTILE),t.logger(t.log_types.INFO,"AD THIRD QUARTILE")})},ENGAGEYA_VIDEO.prototype.attach_ad_midpoint_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_MID_POINT),t.logger(t.log_types.INFO,"AD MID POINT")})},ENGAGEYA_VIDEO.prototype.attach_ad_firstQuartile_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_FIRST_QUARTILE),t.logger(t.log_types.INFO,"AD FIRST QUARTILE")})},ENGAGEYA_VIDEO.prototype.attach_ad_ended_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){t.fire_all_relevant_pixels(t.video_event_types.ALL_ADS_COMPLETED),t.is_close_player_when_ads_completed&&t.close_video(),t.logger(t.log_types.INFO,"ALL ADS COMPLETED")})},ENGAGEYA_VIDEO.prototype.attach_ad_clicked_event=function(){var t=this;this.get_videojs_obj().on("click",function(){t.fire_all_relevant_pixels(t.video_event_types.AD_CLICK),t.logger(t.log_types.INFO,"AD CLICKED")})},ENGAGEYA_VIDEO.prototype.attach_ad_started_event=function(){var t=this;this.get_videojs_obj().ima.addEventListener(google.ima.AdEvent.Type.STARTED,function(){t.fire_all_relevant_pixels(t.video_event_types.AD_START),t.logger(t.log_types.INFO,"AD STARTED"),t.attach_after_ad_started_events()})},ENGAGEYA_VIDEO.prototype.attach_ads_ready_event=function(){var t=this;this.get_videojs_obj().on("adsready",function(){t.ads_manager=this.ima.adsManager,t.ads_ready=!0,t.fire_all_relevant_pixels(t.video_event_types.ADS_READY),t.logger(t.log_types.INFO,"ADS READY"),t.attach_ads_events()})},ENGAGEYA_VIDEO.prototype.attach_ad_timeout_event=function(){var t=this;this.get_videojs_obj().on("adtimeout",function(){t.fire_all_relevant_pixels(t.video_event_types.AD_TIMEOUT),t.is_close_video_on_ad_timeout&&t.close_video(),t.logger(t.log_types.INFO,"AD TIMEOUT")})},ENGAGEYA_VIDEO.prototype.attach_ad_error_event=function(){var t=this;this.get_videojs_obj().on("adserror",function(){t.ads_manager.destroy(),t.fire_all_relevant_pixels(t.video_event_types.AD_ERROR),t.is_close_video_on_ad_error&&t.close_video(),t.logger(t.log_types.INFO,"AD ERROR")})},ENGAGEYA_VIDEO.prototype.close_video=function(){this.jq(this.widget_wrapper_elm).hide("slow")},ENGAGEYA_VIDEO.prototype.get_video_sources_elemets=function(){var t="";if(this.video_sources)for(var i=0;i<this.video_sources.length;i++)t+='<source src="'+this.video_sources[i]+'" type="video/mp4">';return t},ENGAGEYA_VIDEO.prototype.fire_all_relevant_pixels=function(t){this.fire_clicks(t),this.fire_click_pixels(t)},ENGAGEYA_VIDEO.prototype.fire_clicks=function(t){var i=this.get_video_rec();if(i)for(var e=0;e<this.fire_click_events.length;e++)this.fire_click_events[e]==t&&(this.generate_img_pixel(i.clickUrl),this.logger(this.log_types.INFO,"FIRING PIXEL: "+i.clickUrl))},ENGAGEYA_VIDEO.prototype.fire_click_pixels=function(t){},ENGAGEYA_VIDEO.prototype.get_click_defs=function(t,i){var e=this.get_href_target(t.partner_id,i),_=this.get_cancle_click_bubble(),s='onclick="'+_+'"',n=(t.ajx,""),o="";o=o.replace("ecs1.engageya.com/gas-api","ecs3.engageya.com/rec-api");var a=this.get_video_additional_data(t);return window.ajx_sprk_click=function(t){},a.clkurl="//engageya.com",n+=e+' href="'+(a&&a.clkurl?a.clkurl:"javascript:void(0)")+'" '+s+" onmousedown=\"_eng_do_async_click('"+o+"');"+_+'return true;">'},ENGAGEYA_VIDEO.prototype.run_posts_preview=function(){},ENGAGEYA_VIDEO.prototype.calc_slides_dims=function(){var t=this.width-this.widget_lpadding-this.widget_rpadding-this.widget_rmargin-this.widget_lmargin-this.slides_wrapper_lpadding-this.slides_wrapper_rpadding-this.slides_wrapper_lmargin-this.slides_wrapper_rmargin;this.slide_width=t,this.num_of_slides_a_row=1},function(){var t=function(t,i){switch(t){case"createWidget":(e=new ENGAGEYA(i)).run();break;case"createVideoWidget":var e=new ENGAGEYA_VIDEO(i);e.run();break;case"createMultiWidgets":new ENGAGEYA_MULTI_WIDGETS(i).run()}},i=window.EngageyaObject;window[i].l;for(var e in window[i].q){var _=window[i].q[e];t(_[0],_[1])}window[i]=t}();